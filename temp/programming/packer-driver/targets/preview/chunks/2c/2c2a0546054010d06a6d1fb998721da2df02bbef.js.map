{"version":3,"sources":["file:///C:/Users/Admin/Desktop/Gametx2/assets/Scripts/GameCenter.ts"],"names":["_decorator","Component","Node","EditBox","director","Animation","ccclass","property","GameCenter","registeredAccounts","start","storedAccounts","localStorage","getItem","JSON","parse","saveAccountsToLocalStorage","setItem","stringify","offLoginTable","loginTable","active","onLoginTable","getComponent","play","offResTable","resTable","onResTable","register","username","boxNameRes","string","password","boxPassRes","confirmPassword","boxRePassRes","console","log","existingAccount","find","account","WaringLoginRes","setTimeout","newAccount","balance","push","LoadingNode","name","window","loadScene","login","boxNameLogin","boxPassLogin","acc","WaringLogin"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, EditBox, director, Animation } from \"cc\";\r\nconst { ccclass, property } = _decorator;\r\n\r\ninterface AccountInfo {\r\n  username: string;\r\n  password: string;\r\n  balance: number; // Thêm trường balance\r\n}\r\n\r\n@ccclass(\"GameCenter\")\r\nexport class GameCenter extends Component {\r\n  @property(Node)\r\n  private loginTable: Node = null;\r\n\r\n  @property(Node)\r\n  private resTable: Node = null;\r\n\r\n  @property(EditBox)\r\n  private boxNameRes: EditBox = null;\r\n\r\n  @property(EditBox)\r\n  private boxNameLogin: EditBox = null;\r\n\r\n  @property(EditBox)\r\n  private boxPassLogin: EditBox = null;\r\n\r\n  @property(EditBox)\r\n  private boxPassRes: EditBox = null;\r\n\r\n  @property(EditBox)\r\n  private boxRePassRes: EditBox = null;\r\n\r\n  @property(Node)\r\n  private WaringLogin: Node;\r\n\r\n  @property(Node)\r\n  private WaringLoginRes: Node;\r\n\r\n  @property(Node)\r\n  private LoadingNode: Node;\r\n\r\n  private registeredAccounts: AccountInfo[] = [];\r\n\r\n  protected start(): void {\r\n    // Kiểm tra xem có thông tin tài khoản đã lưu trong Local Storage không\r\n    const storedAccounts = localStorage.getItem(\"registeredAccounts\");\r\n    if (storedAccounts) {\r\n      this.registeredAccounts = JSON.parse(storedAccounts);\r\n    }\r\n  }\r\n\r\n  private saveAccountsToLocalStorage() {\r\n    // Lưu thông tin tài khoản vào Local Storage\r\n    localStorage.setItem(\r\n      \"registeredAccounts\",\r\n      JSON.stringify(this.registeredAccounts)\r\n    );\r\n  }\r\n\r\n  private offLoginTable() {\r\n    this.loginTable.active = false;\r\n  }\r\n\r\n  private onLoginTable() {\r\n    this.loginTable.active = true;\r\n    this.loginTable.getComponent(Animation).play(\"TableLogin\");\r\n  }\r\n\r\n  private offResTable() {\r\n    this.resTable.active = false;\r\n  }\r\n\r\n  private onResTable() {\r\n    this.resTable.active = true;\r\n    this.resTable.getComponent(Animation).play(\"ResTbOn\");\r\n  }\r\n\r\n  private register() {\r\n    const username = this.boxNameRes.string;\r\n    const password = this.boxPassRes.string;\r\n    const confirmPassword = this.boxRePassRes.string;\r\n\r\n    if (password !== confirmPassword) {\r\n      console.log(\"Mật khẩu xác nhận không khớp!\");\r\n      return;\r\n    }\r\n\r\n    // Kiểm tra xem tên người dùng đã tồn tại trong mảng chưa\r\n    const existingAccount = this.registeredAccounts.find(\r\n      (account) => account.username === username\r\n    );\r\n    if (existingAccount) {\r\n      this.WaringLoginRes.active = true;\r\n      setTimeout(() => {\r\n        this.WaringLoginRes.active = false;\r\n      }, 1000);\r\n      return;\r\n    }\r\n\r\n    // Thêm thông tin tài khoản mới vào mảng\r\n    const newAccount: AccountInfo = { username, password, balance: 50000 };\r\n    this.registeredAccounts.push(newAccount);\r\n\r\n    // Lưu thông tin vào Local Storage\r\n    this.LoadingNode.active = true;\r\n    this.saveAccountsToLocalStorage();\r\n    const name = newAccount.username;\r\n    window[\"loggedInUsername\"] = name;\r\n    director.loadScene(\"Game\");\r\n    console.log(\"Đăng ký thành công!\");\r\n  }\r\n\r\n  private login() {\r\n    const username = this.boxNameLogin.string;\r\n    const password = this.boxPassLogin.string;\r\n\r\n    // Kiểm tra xem tên người dùng và mật khẩu có khớp với bất kỳ tài khoản nào trong mảng không\r\n    const account = this.registeredAccounts.find(\r\n      (acc) => acc.username === username && acc.password === password\r\n    );\r\n    if (account) {\r\n      this.LoadingNode.active = true;\r\n      const username = account.username;\r\n      window[\"loggedInUsername\"] = username;\r\n      director.loadScene(\"Game\");\r\n    } else {\r\n      this.WaringLogin.active = true;\r\n      setTimeout(() => {\r\n        this.WaringLogin.active = false;\r\n      }, 1000);\r\n    }\r\n  }\r\n}\r\n"]}